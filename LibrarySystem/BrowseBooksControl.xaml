<UserControl x:Class="LibrarySystem.BrowseBooksControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <UserControl.Resources>
        <Style x:Key="BookCardStyle" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="BorderBrush" Value="#E6E9EE"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
    </UserControl.Resources>

    <Grid Background="#F8FAFC">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="White" CornerRadius="10" Padding="16" Margin="0,0,0,16" BorderBrush="#E6E9EE" BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel>
                    <TextBlock Text="Browse Books" FontSize="20" FontWeight="Bold" Foreground="#0F172A"/>
                    <TextBlock Text="Explore our collection" FontSize="12" Foreground="#6B7280" Margin="0,6,0,0"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <TextBox x:Name="SearchTextBox" Width="360" Height="36" Margin="0,0,12,0" Padding="8" VerticalContentAlignment="Center" TextChanged="SearchTextBox_TextChanged"/>
                    <ComboBox x:Name="CategoryComboBox" Width="180" Height="36" Margin="0,0,12,0" VerticalContentAlignment="Center" SelectionChanged="CategoryComboBox_SelectionChanged">
                        <ComboBoxItem Content="All Categories" IsSelected="True"/>
                    </ComboBox>
                    <Button Content="Sort" Width="80" Height="36" Click="SortButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Books Grid -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <ItemsControl x:Name="BooksItemsControl" Margin="0,8,0,8">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Style="{StaticResource BookCardStyle}" Width="220">
                            <StackPanel>
                                <TextBlock Text="{Binding Title}" FontWeight="SemiBold" FontSize="14" Foreground="#0F172A" TextWrapping="Wrap"/>
                                <TextBlock Text="{Binding Author}" FontSize="12" Foreground="#6B7280" Margin="0,6,0,0"/>
                                <TextBlock Text="{Binding Category}" FontSize="12" Foreground="#9CA3AF" Margin="0,4,0,0"/>
                                <TextBlock Text="{Binding YearPublished}" FontSize="12" Foreground="#9CA3AF" Margin="0,4,0,0"/>

                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
                                    <Button Content="Details" Width="70" Height="30" Margin="0,0,6,0" Click="DetailsButton_Click" Tag="{Binding Id}"/>
                                    <Button Content="Reserve" Width="70" Height="30" Background="#10B981" Foreground="White" Click="ReserveButton_Click" Tag="{Binding Id}"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</UserControl>