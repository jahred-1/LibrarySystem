<UserControl x:Class="LibrarySystem.ViewIssuedBooksControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid Background="White">
        <StackPanel Margin="50">
            <TextBlock Text="📕 View Issued Books" 
                       FontSize="36" 
                       FontWeight="Bold" 
                       Foreground="#C62828" 
                       Margin="0,0,0,30"/>

            <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                <TextBox x:Name="SearchTextBox"
                         Width="250" Height="40" 
                         FontSize="16"
                         VerticalContentAlignment="Center"
                         Padding="10"
                         Text="Search by Student ID or Book ID..." 
                         Foreground="#999"
                         GotFocus="SearchTextBox_GotFocus"
                         LostFocus="SearchTextBox_LostFocus"/>
                <DatePicker x:Name="FilterDatePicker" Width="200" Height="40" FontSize="16" Margin="10,0,10,0"/>
                <Button Content="Search" 
                        Width="120" Height="40" 
                        Background="#C62828" 
                        Foreground="White" 
                        BorderThickness="0" 
                        FontSize="16"
                        Cursor="Hand"
                        Click="SearchButton_Click"/>
                <Button Content="Refresh" 
                        Width="120" Height="40" 
                        Background="#0541A5" 
                        Foreground="White" 
                        BorderThickness="0" 
                        FontSize="16"
                        Margin="10,0,0,0"
                        Cursor="Hand"
                        Click="RefreshButton_Click"/>
                <Button Content="Reset" 
                        Width="90" Height="40" 
                        Background="#666" 
                        Foreground="White" 
                        BorderThickness="0" 
                        FontSize="16"
                        Margin="10,0,0,0"
                        Cursor="Hand"
                        Click="ResetButton_Click"/>
            </StackPanel>

            <!-- Summary Cards -->
            <Grid Margin="0,0,0,30">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" Background="#FFEBEE" Padding="20" Margin="0,0,10,0" CornerRadius="8">
                    <StackPanel>
                        <TextBlock Text="Currently Issued" FontSize="14" Foreground="#666"/>
                        <TextBlock x:Name="CurrentlyIssuedText" Text="0" FontSize="32" FontWeight="Bold" Foreground="#C62828" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>

                <Border Grid.Column="1" Background="#FFF3E0" Padding="20" Margin="5,0,5,0" CornerRadius="8">
                    <StackPanel>
                        <TextBlock Text="Due Today" FontSize="14" Foreground="#666"/>
                        <TextBlock x:Name="DueTodayText" Text="0" FontSize="32" FontWeight="Bold" Foreground="#F57C00" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>

                <Border Grid.Column="2" Background="#FCE4EC" Padding="20" Margin="10,0,0,0" CornerRadius="8">
                    <StackPanel>
                        <TextBlock Text="Overdue" FontSize="14" Foreground="#666"/>
                        <TextBlock x:Name="OverdueText" Text="0" FontSize="32" FontWeight="Bold" Foreground="#D32F2F" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <TextBlock Text="Currently Issued Books" 
                       FontSize="20" 
                       FontWeight="SemiBold"
                       Foreground="#333"
                       Margin="0,20,0,10"/>

            <Border BorderBrush="#DDD" BorderThickness="1" CornerRadius="5">
                <DataGrid x:Name="IssuedBooksDataGrid" Height="350" 
                          AutoGenerateColumns="False" 
                          CanUserAddRows="False" 
                          IsReadOnly="True"
                          GridLinesVisibility="None" 
                          Background="White"
                          AlternatingRowBackground="#F9F9F9"
                          HeadersVisibility="Column"
                          SelectionMode="Single">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Book ID" Width="100" Binding="{Binding BookId}"/>
                        <DataGridTextColumn Header="Book Title" Width="250" Binding="{Binding BookTitle}"/>
                        <DataGridTextColumn Header="Student ID" Width="120" Binding="{Binding StudentId}"/>
                        <DataGridTextColumn Header="Student Name" Width="200" Binding="{Binding StudentName}"/>
                        <DataGridTextColumn Header="Issue Date" Width="130" Binding="{Binding IssueDate, StringFormat=yyyy-MM-dd}"/>
                        <DataGridTextColumn Header="Due Date" Width="130" Binding="{Binding DueDate, StringFormat=yyyy-MM-dd}"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>
        </StackPanel>
    </Grid>
</UserControl>